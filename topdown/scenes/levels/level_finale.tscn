[gd_scene format=3]

[ext_resource type="Script" path="res://scenes/levels/level_finale.gd" id="1"]
[ext_resource type="PackedScene" path="res://scenes/player/neo.tscn" id="2"]
[ext_resource type="PackedScene" path="res://scenes/objects/steam_valve.tscn" id="3"]
[ext_resource type="PackedScene" path="res://scenes/agents/agent.tscn" id="4"]
[ext_resource type="PackedScene" path="res://scenes/terminal/terminal_ui.tscn" id="5"]
[ext_resource type="PackedScene" path="res://scenes/ui/hud.tscn" id="6"]

[sub_resource type="RectangleShape2D" id="phone_shape"]
size = Vector2(32, 32)

[node name="LevelFinale" type="Node2D"]
script = ExtResource("1")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]

[node name="StreetFloor" type="Polygon2D" parent="."]
color = Color(0.04, 0.06, 0.04, 1)
polygon = PackedVector2Array(32, 100, 608, 100, 608, 500, 32, 500)

[node name="SteamValve" parent="." instance=ExtResource("3")]
position = Vector2(80, 300)

[node name="Agent" parent="." instance=ExtResource("4")]
position = Vector2(300, 300)

[node name="FogOverlay" type="CanvasModulate" parent="."]
visible = false
color = Color(0.05, 0.08, 0.05, 1)

[node name="Neo" parent="." instance=ExtResource("2")]
position = Vector2(80, 200)

[node name="PhoneZone" type="Area2D" parent="."]
position = Vector2(560, 300)
collision_layer = 0
collision_mask = 4

[node name="PhoneShape" type="CollisionShape2D" parent="PhoneZone"]
shape = SubResource("phone_shape")

[node name="PhoneVisual" type="Polygon2D" parent="PhoneZone"]
color = Color(0, 1, 0, 0.6)
polygon = PackedVector2Array(-12, -20, 12, -20, 12, 20, -12, 20)

[node name="TerminalUI" parent="." instance=ExtResource("5")]
[node name="HUD" parent="." instance=ExtResource("6")]

[connection signal="body_entered" from="PhoneZone" to="." method="_on_phone_reached"]
